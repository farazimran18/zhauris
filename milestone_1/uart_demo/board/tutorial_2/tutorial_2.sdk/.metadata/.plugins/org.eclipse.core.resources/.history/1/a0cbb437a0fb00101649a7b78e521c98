#include <stdio.h>
#include "platform.h"
#include "xil_printf.h"
#include "xparameters.h"

volatile unsigned int* led = (unsigned int*) XPAR_GPIO_LED_BASEADDR;
volatile unsigned int* swt = (unsigned int*) XPAR_GPIO_SWITCH_BASEADDR;

int main()
{
    init_platform();

    print("Hello World\n\r");

    while (1) {
        unsigned sw = *swt;
        unsigned out = *led;

        // LED0 = SW0
        if (sw & (1u<<0)) out |=  (1u<<0);
        else             out &= ~(1u<<0);

        // LED1 = SW1
        if (sw & (1u<<1)) out |=  (1u<<1);
        else             out &= ~(1u<<1);

        *led = out;
    }


    cleanup_platform();
    return 0;
}
